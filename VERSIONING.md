# ChildWatch - Управление версиями

## Автоматическое версионирование

Проект использует автоматическое управление версиями через скрипт `version.sh`.

### Использование

1. **Создание новой версии:**
   ```bash
   ./version.sh
   ```

2. **Отправка изменений:**
   ```bash
   git push origin main --tags
   ```

### Формат версий

Проект использует [Semantic Versioning](https://semver.org/):
- **MAJOR** - несовместимые изменения API
- **MINOR** - новая функциональность с обратной совместимостью  
- **PATCH** - исправления ошибок с обратной совместимостью

Примеры:
- `1.0.0` - первый релиз
- `1.0.1` - исправление ошибок
- `1.1.0` - новая функциональность
- `2.0.0` - кардинальные изменения

### Что делает скрипт

1. **Проверяет** наличие git и статус репозитория
2. **Получает** текущую версию из `app/build.gradle`
3. **Запрашивает** новую версию и описание изменений
4. **Обновляет** `app/build.gradle` (versionName и versionCode)
5. **Обновляет** `CHANGELOG.md` с новой записью
6. **Создает** коммит с описанием изменений
7. **Создает** тег версии

### Файлы, изменяемые при версионировании

- `app/build.gradle` - версия приложения
- `CHANGELOG.md` - история изменений
- Git коммит и тег

### Требования

- Git
- Bash
- Права на запись в репозиторий

### Пример использования

```bash
$ ./version.sh
[INFO] ChildWatch Version Management Script
[INFO] ====================================
[INFO] Текущая версия: 1.0.0 (1)
Введите новую версию (например, 1.0.1): 1.0.1
Введите описание изменений: Исправление ошибки с аудио записью

[WARNING] Будет выполнено:
[WARNING] - Обновление версии с 1.0.0 до 1.0.1
[WARNING] - Обновление versionCode с 1 до 2
[WARNING] - Обновление CHANGELOG.md
[WARNING] - Создание коммита с тегом

Продолжить? (y/N): y
[INFO] Обновление версии до 1.0.1 (2)...
[SUCCESS] Версия обновлена до 1.0.1 (2)
[INFO] Обновление CHANGELOG.md...
[SUCCESS] CHANGELOG.md обновлен
[INFO] Создание коммита версии 1.0.1...
[SUCCESS] Коммит версии 1.0.1 создан
[INFO] Создание тега v1.0.1...
[SUCCESS] Тег v1.0.1 создан

[SUCCESS] Версия 1.0.1 успешно создана!
[INFO] Для отправки изменений выполните: git push origin main --tags
```

### Ручное версионирование

Если скрипт недоступен, можно обновить версию вручную:

1. **Обновите** `app/build.gradle`:
   ```gradle
   versionCode 2
   versionName "1.0.1"
   ```

2. **Обновите** `CHANGELOG.md` с новой записью

3. **Создайте** коммит:
   ```bash
   git add app/build.gradle CHANGELOG.md
   git commit -m "Release v1.0.1 - Исправление ошибки с аудио записью"
   git tag -a "v1.0.1" -m "Release version 1.0.1"
   ```

4. **Отправьте** изменения:
   ```bash
   git push origin main --tags
   ```
